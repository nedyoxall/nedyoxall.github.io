<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>A Life in Data - data science</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">A Life in Data </a></h1>
                <nav><ul>
                    <li><a href="/pages/homepage.html">Home</a></li>
                    <li><a href="/category/coding.html">Coding</a></li>
                    <li><a href="/category/data-science.html">Data Science</a></li>
                    <li><a href="/category/random.html">Random</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/entity_resolution_with_dedupe.html">Entity Resolution with Dedupe Package and SQLite</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-02-01T21:30:00+00:00">
                Published: Wed 01 February 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/ned.html">Ned</a>
        </address>
<p>In <a href="/category/data-science.html">Data Science</a>.</p>
<p>tags: <a href="/tag/data-science.html">data science</a> <a href="/tag/entity-resolution.html">entity resolution</a> </p>
</footer><!-- /.post-info --><style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #90CAF9;
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%);
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
@-moz-document url-prefix() {
  div.inner_cell {
    overflow-x: hidden;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">dedupe</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">optparse</span>
<span class="kn">import</span> <span class="nn">locale</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">multiprocessing</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="kn">as</span> <span class="nn">lite</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">unicodedata</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_columns</span> <span class="o">=</span> <span class="mi">999</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Original-data-and-cleaning">Original data and cleaning<a class="anchor-link" href="#Original-data-and-cleaning">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../data/companies-with-controlling-entities v6.csv&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>/Users/nedyoxall/anaconda/envs/datakind3/lib/python3.5/site-packages/IPython/core/interactiveshell.py:2717: DtypeWarning: Columns (0) have mixed types. Specify dtype option on import or set low_memory=False.
  interactivity=interactivity, compiler=compiler, result=result)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[3]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>company_number</th>
      <th>company_name</th>
      <th>jurisdiction_code</th>
      <th>Controlling Entity SKey</th>
      <th>Controlling Entity Name</th>
      <th>opencorporates_url</th>
      <th>address_care_of</th>
      <th>address_country</th>
      <th>address_locality</th>
      <th>address_postal_code</th>
      <th>address_region</th>
      <th>address_street</th>
      <th>controlling_company_type</th>
      <th>country_of_residence</th>
      <th>dob_month</th>
      <th>dob_year</th>
      <th>family_name</th>
      <th>given_name</th>
      <th>middle_name</th>
      <th>nationality</th>
      <th>po_box</th>
      <th>title</th>
      <th>uid</th>
      <th>ultimate_entity_company_number</th>
      <th>controlling_entity_company_number</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>452</td>
      <td>VERNON INVESTMENTS (1856) LIMITED</td>
      <td>gb</td>
      <td>0</td>
      <td>Mrs Mary Jane Ursula White</td>
      <td>https://opencorporates.com/companies/gb/00000452</td>
      <td>NaN</td>
      <td>United Kingdom</td>
      <td>High Wycombe</td>
      <td>HP10 9QN</td>
      <td>Bucks.</td>
      <td>The Mill House Boundary Road\nLoudwater</td>
      <td>NaN</td>
      <td>United Kingdom</td>
      <td>8.0</td>
      <td>1961.0</td>
      <td>White</td>
      <td>Mary</td>
      <td>Jane Ursula</td>
      <td>British</td>
      <td>NaN</td>
      <td>Mrs</td>
      <td>/company/00000452/persons-with-significant-con...</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>452</td>
      <td>VERNON INVESTMENTS (1856) LIMITED</td>
      <td>gb</td>
      <td>1</td>
      <td>Mr Andrew Gwynne Haydon White</td>
      <td>https://opencorporates.com/companies/gb/00000452</td>
      <td>NaN</td>
      <td>United Kingdom</td>
      <td>High Wycombe</td>
      <td>HP10 9QN</td>
      <td>Bucks.</td>
      <td>The Mill House Boundary Road\nLoudwater</td>
      <td>NaN</td>
      <td>United Kingdom</td>
      <td>2.0</td>
      <td>1960.0</td>
      <td>White</td>
      <td>Andrew</td>
      <td>Gwynne Haydon</td>
      <td>British</td>
      <td>NaN</td>
      <td>Mr</td>
      <td>/company/00000452/persons-with-significant-con...</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># TODO - trim left and right of name for spaces? </span>
<span class="c1"># TODO - check that the index is unique, or will cause problems at a later date!</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Select just the columns that are useful for entity resolution. Then:</p>
<ol>
<li>Remove rows with nulls in for family name and given name columns.</li>
<li>Fill NaNs in other columns with None (required for dedupe package to work properly on String types).</li>
<li>Convert numbers to strings - maybe the best way of dealing with human input text?? Open question!</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">to_dedupe</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s1">&#39;family_name&#39;</span><span class="p">,</span> <span class="s1">&#39;given_name&#39;</span><span class="p">,</span> <span class="s1">&#39;middle_name&#39;</span><span class="p">,</span> <span class="s1">&#39;dob_year&#39;</span><span class="p">,</span> <span class="s1">&#39;dob_month&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># Some utility functions for getting dataframes ready for deduping</span>
<span class="k">def</span> <span class="nf">remove_nulls_from_these_columns</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Utility function to remove nulls from the specified columns of a dataframe.</span>
<span class="sd">        </span>
<span class="sd">        Inputs: - df -&gt; dataframe to remove nulls from</span>
<span class="sd">                - columns -&gt; list of columns which should have no nulls in</span>
<span class="sd">                </span>
<span class="sd">        Outputs: - new dataframe without nulls</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number of rows before removing nulls: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)))</span>
    <span class="n">to_remove</span> <span class="o">=</span> <span class="n">df</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">no_null</span> <span class="o">=</span> <span class="n">to_remove</span><span class="p">[</span><span class="n">to_remove</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number of rows after removing &quot;</span> <span class="o">+</span> <span class="n">col</span> <span class="o">+</span> <span class="s2">&quot;: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">no_null</span><span class="p">)))</span>
        <span class="n">to_remove</span> <span class="o">=</span> <span class="n">no_null</span>
        
    <span class="k">return</span> <span class="n">no_null</span>

<span class="k">def</span> <span class="nf">fill_nulls_with_none</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Fills nulls in a dataframe with None.</span>
<span class="sd">        This is required for the Dedupe package to work properly.</span>
<span class="sd">        </span>
<span class="sd">        Input: - dataframe with nulls as NaN</span>
<span class="sd">        </span>
<span class="sd">        Output: - new dataframe with nulls as None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">new_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">new_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">(),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">new_df</span>

<span class="k">def</span> <span class="nf">convert_numbers_to_strings</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cols_to_convert</span><span class="p">,</span> <span class="n">remove_point_zero</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Convert number types to strings in a dataframe.</span>
<span class="sd">        This is convoluted as need to keep NoneTypes as NoneTypes for what comes next!</span>
<span class="sd">        </span>
<span class="sd">        Inputs: - df -&gt; dataframe to convert number types</span>
<span class="sd">                - cols_to_convert -&gt; list of columns to convert</span>
<span class="sd">                - remove_point_zero -&gt; bool to say whether you want &#39;.0&#39; removed from number</span>
<span class="sd">        </span>
<span class="sd">        Ouputs: - dataframe with converted number types</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">cols_to_convert</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">remove_point_zero</span><span class="p">:</span>
            <span class="n">new_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.0&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>\
                                            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span> <span class="k">else</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>\
                                            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span> <span class="k">else</span> <span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">new_df</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">to_dedupe</span> <span class="o">=</span> <span class="n">remove_nulls_from_these_columns</span><span class="p">(</span><span class="n">to_dedupe</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;family_name&#39;</span><span class="p">,</span><span class="s1">&#39;given_name&#39;</span><span class="p">],</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">to_dedupe</span> <span class="o">=</span> <span class="n">fill_nulls_with_none</span><span class="p">(</span><span class="n">to_dedupe</span><span class="p">)</span>
<span class="n">to_dedupe</span> <span class="o">=</span> <span class="n">convert_numbers_to_strings</span><span class="p">(</span><span class="n">to_dedupe</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;dob_year&#39;</span><span class="p">,</span><span class="s1">&#39;dob_month&#39;</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Number of rows before removing nulls: 759447
Number of rows after removing family_name: 706156
Number of rows after removing given_name: 706151
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">to_dedupe</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[8]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>family_name</th>
      <th>given_name</th>
      <th>middle_name</th>
      <th>dob_year</th>
      <th>dob_month</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>White</td>
      <td>Mary</td>
      <td>Jane Ursula</td>
      <td>1961</td>
      <td>8</td>
    </tr>
    <tr>
      <th>1</th>
      <td>White</td>
      <td>Andrew</td>
      <td>Gwynne Haydon</td>
      <td>1960</td>
      <td>2</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Cooke</td>
      <td>Bernard</td>
      <td>Patrick</td>
      <td>1939</td>
      <td>3</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Schofield</td>
      <td>Peter</td>
      <td>Malcolm</td>
      <td>1944</td>
      <td>2</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Howells</td>
      <td>Peter</td>
      <td>John</td>
      <td>1951</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Dedupe requires that the input data be in the form of a list of dicts:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">to_dedupe_dict</span> <span class="o">=</span> <span class="n">to_dedupe</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span> <span class="o">=</span> <span class="s1">&#39;index&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is what the entries of the list look like:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">to_dedupe_dict</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[10]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>{&#39;dob_month&#39;: &#39;8&#39;,
 &#39;dob_year&#39;: &#39;1961&#39;,
 &#39;family_name&#39;: &#39;White&#39;,
 &#39;given_name&#39;: &#39;Mary&#39;,
 &#39;middle_name&#39;: &#39;Jane Ursula&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For convenience while testing, store the <code>to_dedupe_dict</code> object as a pickle file:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;to_dedupe_dict.pkl&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">to_dedupe_dict</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;to_dedupe_dict.pkl&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">to_dedupe_dict</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Setting-up-the-Dedupe-object">Setting up the Dedupe object<a class="anchor-link" href="#Setting-up-the-Dedupe-object">&#182;</a></h2><p>Each field (or, in other words, column) has to be declared and given a type. You can read about the different options <a href="https://dedupe.readthedocs.io/en/latest/Variable-definition.html">here</a>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># docs for this are here: </span>
<span class="n">fields</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;field&#39;</span> <span class="p">:</span> <span class="s1">&#39;family_name&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span> <span class="p">:</span> <span class="s1">&#39;String&#39;</span><span class="p">},</span>
          <span class="p">{</span><span class="s1">&#39;field&#39;</span> <span class="p">:</span> <span class="s1">&#39;given_name&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;String&#39;</span><span class="p">},</span> 
          <span class="p">{</span><span class="s1">&#39;field&#39;</span> <span class="p">:</span> <span class="s1">&#39;middle_name&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;String&#39;</span><span class="p">,</span> <span class="s1">&#39;has_missing&#39;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
          <span class="p">{</span><span class="s1">&#39;field&#39;</span> <span class="p">:</span> <span class="s1">&#39;dob_year&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;String&#39;</span><span class="p">,</span> <span class="s1">&#39;has_missing&#39;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
          <span class="p">{</span><span class="s1">&#39;field&#39;</span> <span class="p">:</span> <span class="s1">&#39;dob_month&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;String&#39;</span><span class="p">,</span> <span class="s1">&#39;has_missing&#39;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">}]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># There is a bug later on that requires num_cores to be 1, but we can make use of</span>
<span class="c1"># multi-threaded processes in the meantime</span>
<span class="n">deduper</span> <span class="o">=</span> <span class="n">dedupe</span><span class="o">.</span><span class="n">Dedupe</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="n">num_cores</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We then sample the data to get something to train on. More information about all of the <code>deduper</code> object methods can be found <a href="https://dedupe.readthedocs.io/en/latest/API-documentation.html#dedupe-objects">here</a>. Note that training is done by a human - pairs of records are presented and you're asked whether they are referring to the same thing or not (coming to this bit shortly!)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">deduper</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">to_dedupe_dict</span><span class="p">,</span> <span class="n">sample_size</span><span class="o">=</span><span class="mi">1000000</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Training-dedupe-with-human-matched-records">Training dedupe with human-matched records<a class="anchor-link" href="#Training-dedupe-with-human-matched-records">&#182;</a></h2><p>If you've already done the training, load the file that contains the record pairs marked as being duplicates or not. (It gets saved as a json file).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">training_file</span> <span class="o">=</span> <span class="s1">&#39;controlling_entities_dedupe_training.json&#39;</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">training_file</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;reading labeled examples from &#39;</span><span class="p">,</span> <span class="n">training_file</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">training_file</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tf</span><span class="p">:</span>
        <span class="n">deduper</span><span class="o">.</span><span class="n">readTraining</span><span class="p">(</span><span class="n">tf</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;no training file found - will create new one: &#39;</span> <span class="o">+</span> <span class="n">training_file</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:dedupe.api:reading training from file
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>reading labeled examples from  controlling_entities_dedupe_training.json
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">dedupe</span><span class="o">.</span><span class="n">convenience</span><span class="o">.</span><span class="n">consoleLabel</span><span class="p">(</span><span class="n">deduper</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Hilton
given_name : Paul
middle_name : Christopher
dob_year : 1967
dob_month : 6

family_name : Hilton
given_name : Paul
middle_name : None
dob_year : 1967
dob_month : 10

21/10 positive, 27/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Watts
given_name : Stephen
middle_name : Patrick James
dob_year : 1951
dob_month : 3

family_name : Watt
given_name : Stephen
middle_name : None
dob_year : 1959
dob_month : 3

21/10 positive, 28/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Perkins
given_name : Mary
middle_name : Lesley
dob_year : 1943
dob_month : 2

family_name : Perkins
given_name : Mary
middle_name : Lesley
dob_year : 1944
dob_month : 2

21/10 positive, 29/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Brown
given_name : Dominic
middle_name : None
dob_year : 1973
dob_month : 8

family_name : Brownlee
given_name : Dominic
middle_name : None
dob_year : 1978
dob_month : 8

22/10 positive, 29/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Kirby
given_name : Hugo
middle_name : Giles Stephen Astley
dob_year : 1953
dob_month : 5

family_name : Kirby
given_name : Hugo
middle_name : Giles Stephen Astley
dob_year : 1958
dob_month : 5

22/10 positive, 30/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Chen
given_name : Hongbing
middle_name : None
dob_year : 1971
dob_month : 12

family_name : Chen
given_name : Hongbin
middle_name : None
dob_year : 1970
dob_month : 12

23/10 positive, 30/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : White
given_name : June
middle_name : Elizabeth
dob_year : 1949
dob_month : 6

family_name : Whitehouse
given_name : June
middle_name : None
dob_year : 1941
dob_month : 6

24/10 positive, 30/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Greaves
given_name : Justin
middle_name : Piers Leonard
dob_year : 1947
dob_month : 12

family_name : Greaves
given_name : Justin
middle_name : Piers Leonard
dob_year : 1957
dob_month : 12

24/10 positive, 31/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Grant
given_name : Jo
middle_name : None
dob_year : 1970
dob_month : 8

family_name : Grant
given_name : John
middle_name : Kenneth
dob_year : 1960
dob_month : 8

25/10 positive, 31/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Quinn
given_name : Paul
middle_name : Lawrence Patrick
dob_year : 1971
dob_month : 6

family_name : Quinn
given_name : Paul
middle_name : Patrick
dob_year : 1979
dob_month : 6

25/10 positive, 32/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Kirby
given_name : Hugo
middle_name : Giles Stephen Astley
dob_year : 1958
dob_month : 5

family_name : Kirby
given_name : Hugo
middle_name : Giles Stephen Astley
dob_year : 1953
dob_month : 5

25/10 positive, 33/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Meek
given_name : Jeffrey
middle_name : Andrew Callaghan
dob_year : 1963
dob_month : 4

family_name : Meek
given_name : Jeffrey
middle_name : Andrew Callaghan
dob_year : 1962
dob_month : 4

26/10 positive, 33/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Dalton
given_name : Richard
middle_name : Alistair
dob_year : 1969
dob_month : 1

family_name : Dalton
given_name : Richard
middle_name : None
dob_year : 1960
dob_month : 12

27/10 positive, 33/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Harris
given_name : Jarod
middle_name : Thomas Chamberlain
dob_year : 1971
dob_month : 2

family_name : Harris
given_name : Jarod
middle_name : Thomas Chamberlain
dob_year : 1972
dob_month : 2

27/10 positive, 34/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Parsons
given_name : Andrew
middle_name : None
dob_year : 1964
dob_month : 1

family_name : Parsons
given_name : Andrew
middle_name : Keith
dob_year : 1961
dob_month : 11

28/10 positive, 34/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Prabhaker
given_name : Sangeet
middle_name : Alejanro Luis
dob_year : 1979
dob_month : 3

family_name : Prabhaker
given_name : Sangeet
middle_name : Alejanro Luis
dob_year : 1976
dob_month : 3

28/10 positive, 35/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Griffiths
given_name : Peter
middle_name : David
dob_year : 1959
dob_month : 12

family_name : Griffiths
given_name : Peter
middle_name : None
dob_year : 1979
dob_month : 1

29/10 positive, 35/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Davies
given_name : Peter
middle_name : Joseph Mansel
dob_year : 1969
dob_month : 9

family_name : Davies
given_name : Peter
middle_name : Joseph Mansel
dob_year : 1962
dob_month : 9

29/10 positive, 36/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Noble
given_name : David
middle_name : None
dob_year : 1956
dob_month : 1

family_name : Noble
given_name : David
middle_name : Clive
dob_year : 1955
dob_month : 11

30/10 positive, 36/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Beever Estate
given_name : Executors
middle_name : Of Edward
dob_year : 2015
dob_month : 9

family_name : Beever
given_name : The
middle_name : Executors Of Edward
dob_year : 2015
dob_month : 9

30/10 positive, 37/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Jones
given_name : Darren
middle_name : Raymond
dob_year : 1971
dob_month : 5

family_name : Jones
given_name : Darren
middle_name : Paul
dob_year : 1976
dob_month : 5

31/10 positive, 37/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Solanki
given_name : Nimesh
middle_name : None
dob_year : 1980
dob_month : 4

family_name : Solanki
given_name : Kailesh
middle_name : None
dob_year : 1980
dob_month : 4

31/10 positive, 38/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Anstruther Gough Calthorpe Bt
given_name : Euan
middle_name : Hamilton
dob_year : 1966
dob_month : 6

family_name : Anstruther Gough Calthorpe Bt
given_name : Euan
middle_name : Hamilton
dob_year : 1996
dob_month : 6

31/10 positive, 39/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Thomson
given_name : William
middle_name : George Ritchie
dob_year : 1951
dob_month : 5

family_name : Thomson
given_name : William
middle_name : George Ritchie
dob_year : 1950
dob_month : 5

32/10 positive, 39/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Hall
given_name : Richard
middle_name : Bruce
dob_year : 1952
dob_month : 10

family_name : Billingsley
given_name : Richard
middle_name : Albert
dob_year : 1952
dob_month : 10

33/10 positive, 39/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Shiekh
given_name : Amar
middle_name : None
dob_year : 1961
dob_month : 1

family_name : Sheikh
given_name : Amar
middle_name : None
dob_year : 1961
dob_month : 1

33/10 positive, 40/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : De Pellette
given_name : Alan
middle_name : James
dob_year : 1968
dob_month : 12

family_name : De Pellette
given_name : Alan
middle_name : None
dob_year : 1968
dob_month : 2

34/10 positive, 40/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Harris
given_name : Anthony
middle_name : None
dob_year : 1968
dob_month : 10

family_name : Harris
given_name : Anthony
middle_name : John
dob_year : 1968
dob_month : 5

35/10 positive, 40/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Collison
given_name : Christian
middle_name : David Ross
dob_year : 1984
dob_month : 11

family_name : Collison
given_name : Christian
middle_name : David Ross
dob_year : 1984
dob_month : 8

35/10 positive, 41/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Newett
given_name : David
middle_name : Ian
dob_year : 1959
dob_month : 2

family_name : Newett
given_name : David
middle_name : Ian
dob_year : 1959
dob_month : 12

36/10 positive, 41/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Farrugia
given_name : Paul
middle_name : John
dob_year : 1957
dob_month : 11

family_name : Farrugia
given_name : Paula
middle_name : None
dob_year : 1957
dob_month : 2

37/10 positive, 41/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Paterson
given_name : Thomas
middle_name : James
dob_year : 1979
dob_month : 9

family_name : Paterson
given_name : Thomas
middle_name : James
dob_year : 1979
dob_month : 10

37/10 positive, 42/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Chesterfield
given_name : Philip
middle_name : Markham
dob_year : 1965
dob_month : 12

family_name : Chesterfield
given_name : Philip
middle_name : Markham
dob_year : 1965
dob_month : 2

38/10 positive, 42/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Sanders
given_name : Justin
middle_name : David Cavania
dob_year : 1972
dob_month : 6

family_name : Sanders
given_name : Justin
middle_name : David Cavania
dob_year : 1976
dob_month : 6

39/10 positive, 42/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Anstruther Gough Calthorpe Bt
given_name : Euan
middle_name : Hamilton
dob_year : 1996
dob_month : 6

family_name : Anstruther Gough Calthorpe Bt
given_name : Euan
middle_name : Hamilton
dob_year : 1966
dob_month : 6

40/10 positive, 42/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Beattie
given_name : Will
middle_name : Eric Macdonald
dob_year : 1973
dob_month : 3

family_name : Beattie
given_name : William
middle_name : Brian
dob_year : 1943
dob_month : 3

41/10 positive, 42/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>n
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Meath Baker
given_name : Prescilla
middle_name : Ann
dob_year : 1937
dob_month : 5

family_name : Meath Baker
given_name : Prescilla
middle_name : Ann
dob_year : 1938
dob_month : 5

41/10 positive, 43/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>y
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>family_name : Millar
given_name : Lynne
middle_name : Patricia
dob_year : 1959
dob_month : 3

family_name : Wall
given_name : Lynne
middle_name : None
dob_year : 1959
dob_month : 3

42/10 positive, 43/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>f
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>Finished labeling
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Once you've provided the training data, you can train the model.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># learn both the classifier and blocking rules</span>
<span class="c1"># max_comparisons seems to be SUPER important in finding good predicates</span>
<span class="n">deduper</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">recall</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">maximum_comparisons</span><span class="o">=</span><span class="mi">1000000000</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:rlr.crossvalidation:using cross validation to find optimum alpha...
INFO:rlr.crossvalidation:optimum alpha: 0.001000
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.4, given_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.6, given_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.2, given_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.8, given_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (3, given_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (2, given_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (1, given_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (4, given_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.6, given_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.2, given_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.4, given_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.8, given_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.8, dob_month)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.4, dob_month)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.2, dob_month)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.6, dob_month)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (2, dob_month)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (4, dob_month)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (3, dob_month)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (1, dob_month)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.8, dob_month)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.2, dob_month)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.6, dob_month)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.4, dob_month)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.6, middle_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.4, middle_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.2, middle_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.8, middle_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (4, middle_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (3, middle_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (2, middle_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (1, middle_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.6, middle_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.2, middle_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.4, middle_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.8, middle_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.2, family_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.4, family_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.8, family_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.6, family_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (2, family_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (1, family_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (4, family_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (3, family_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.4, family_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.8, family_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.6, family_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.2, family_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.8, dob_year)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.6, dob_year)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.2, dob_year)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.4, dob_year)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (4, dob_year)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (1, dob_year)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (3, dob_year)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (2, dob_year)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.2, dob_year)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.6, dob_year)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.8, dob_year)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.4, dob_year)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.4, given_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.6, given_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.2, given_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.8, given_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (3, given_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (2, given_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (1, given_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (4, given_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.6, given_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.2, given_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.4, given_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.8, given_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.8, dob_month)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.4, dob_month)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.2, dob_month)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.6, dob_month)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (2, dob_month)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (4, dob_month)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (3, dob_month)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (1, dob_month)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.8, dob_month)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.2, dob_month)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.6, dob_month)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.4, dob_month)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.6, middle_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.4, middle_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.2, middle_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.8, middle_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (4, middle_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (3, middle_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (2, middle_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (1, middle_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.6, middle_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.2, middle_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.4, middle_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.8, middle_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.2, family_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.4, family_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.8, family_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.6, family_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (2, family_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (1, family_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (4, family_name)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (3, family_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.4, family_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.8, family_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.6, family_name)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.2, family_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.8, dob_year)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.6, dob_year)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.2, dob_year)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.4, dob_year)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (4, dob_year)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (1, dob_year)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (3, dob_year)
INFO:dedupe.blocking:Canopy: LevenshteinCanopyPredicate: (2, dob_year)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.2, dob_year)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.6, dob_year)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.8, dob_year)
INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.4, dob_year)
INFO:dedupe.training:Final predicate set:
INFO:dedupe.training:(SimplePredicate: (commonThreeTokens, family_name), TfidfTextCanopyPredicate: (0.2, middle_name))
INFO:dedupe.training:(SimplePredicate: (commonSixGram, family_name), SimplePredicate: (commonThreeTokens, middle_name))
INFO:dedupe.training:(SimplePredicate: (commonTwoTokens, family_name), SimplePredicate: (twoGramFingerprint, family_name))
INFO:dedupe.training:(TfidfTextCanopyPredicate: (0.4, family_name), TfidfTextCanopyPredicate: (0.8, middle_name))
INFO:dedupe.training:(SimplePredicate: (fingerprint, family_name), TfidfNGramCanopyPredicate: (0.4, dob_month))
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The blocking rules have now been found, and the classifier has also been trained. The classifier (which determines whether 2 records are the same or not) is an L2 regularized logistic regression. Any model in SK learn with a fit and predict_proba method could be used in its place.</p>
<p>Just to demonstrate the inputs to the model, we select 2 records from the inputs:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">record_pairs</span> <span class="o">=</span> <span class="p">((</span><span class="n">to_dedupe_dict</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">to_dedupe_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]),)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The model features are given by:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">deduper</span><span class="o">.</span><span class="n">data_model</span><span class="o">.</span><span class="n">_field_comparators</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>[(&#39;family_name&#39;, &lt;built-in function normalizedAffineGapDistance&gt;, 0, 1), (&#39;given_name&#39;, &lt;built-in function normalizedAffineGapDistance&gt;, 1, 2), (&#39;middle_name&#39;, &lt;built-in function normalizedAffineGapDistance&gt;, 2, 3), (&#39;dob_year&#39;, &lt;built-in function normalizedAffineGapDistance&gt;, 3, 4), (&#39;dob_month&#39;, &lt;built-in function normalizedAffineGapDistance&gt;, 4, 5)]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And the input values for this particular pair of records by:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">deduper</span><span class="o">.</span><span class="n">data_model</span><span class="o">.</span><span class="n">distances</span><span class="p">(</span><span class="n">record_pairs</span><span class="o">=</span><span class="n">record_pairs</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>[[ 0.5         4.69999981  4.79166651  1.75        5.5       ]]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The coefficients in the model itself are given by:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">deduper</span><span class="o">.</span><span class="n">classifier</span><span class="o">.</span><span class="n">weights</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>[-11.37927761  -7.32188256  -0.63712457 -14.30634516  -4.50698292]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Anyway, after training we can save the data we labelled, as well as the settings for this particular run:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">settings_file</span> <span class="o">=</span> <span class="s1">&#39;dedupe_settings&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">settings_file</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">deduper</span><span class="o">.</span><span class="n">writeSettings</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">training_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">deduper</span><span class="o">.</span><span class="n">writeTraining</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The training finds both the Predicates for creating 'blocks' (or 'canopies' - for a good explanation, see <a href="http://www.kamalnigam.com/papers/canopy-kdd00.pdf">this</a> excellent paper) and the classifier for actually determining whether two records are referring to the same entity.</p>
<p>The <a href="http://dedupe.readthedocs.io/en/latest/Making-smart-comparisons.html">documentation</a> provides a good overview on why one might want to use blocks/canopies.</p>
<p>My understanding is that blocks/canopies are created for every single predicate - in other words, blocks/canopies are created on the entire dataset as many times as there are predicates.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">deduper</span><span class="o">.</span><span class="n">blocker</span><span class="o">.</span><span class="n">predicates</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[25]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>((SimplePredicate: (commonThreeTokens, family_name),
  TfidfTextCanopyPredicate: (0.2, middle_name)),
 (SimplePredicate: (commonSixGram, family_name),
  SimplePredicate: (commonThreeTokens, middle_name)),
 (SimplePredicate: (commonTwoTokens, family_name),
  SimplePredicate: (twoGramFingerprint, family_name)),
 (TfidfTextCanopyPredicate: (0.4, family_name),
  TfidfTextCanopyPredicate: (0.8, middle_name)),
 (SimplePredicate: (fingerprint, family_name),
  TfidfNGramCanopyPredicate: (0.4, dob_month)))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Some predicates rely on an 'inverted index', these are the <code>CanopyPredicates</code> and the <code>SearchPredicates</code>. You can avoid predicates that rely on inverted indexes by setting <code>index_predicates</code> to <code>False</code> in the <code>train</code> method.</p>
<p>Inverted indexes are used to "find the documents where the word X occurs". Unfortunately it seems quite challenging to print out the inverted index itself to understand exactly what it's doing. Nevermind!</p>
<p>Note that canopies are used by predicates that require an inverted index, and blocks are used by simple predicates. The same row can appear in multiple canopies (i.e. canopies can overlap), while the same row only ever appears in one block.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">deduper</span><span class="o">.</span><span class="n">blocker</span><span class="o">.</span><span class="n">index_fields</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>dob_month
middle_name
family_name
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>With large data sets, the data_sample, training_pairs, training_data, and activeLearner objects are potentially very large memory-wise. This command deletes them to free up said memory.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">deduper</span><span class="o">.</span><span class="n">cleanupTraining</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Storing-the-raw-data-in-a-database">Storing the raw data in a database<a class="anchor-link" href="#Storing-the-raw-data-in-a-database">&#182;</a></h2><p>For portability, it's convenient to use SQLite, rather than anything bigger and grander requiring a database server. You probably wouldn't want to deal with hundreds of millions or rows like this though!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">database_name</span> <span class="o">=</span> <span class="s1">&#39;controlling_entities_dedupe_database.db&#39;</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">database_name</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;database &#39;{}&#39; already exists. deleting it and starting from scratch!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">database_name</span><span class="p">))</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">database_name</span><span class="p">)</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">lite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">database_name</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>database &#39;controlling_entities_dedupe_database.db&#39; already exists. deleting it and starting from scratch!
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As a reminder, the raw, un-deduplicated data looks like this:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">to_dedupe</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[30]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>family_name</th>
      <th>given_name</th>
      <th>middle_name</th>
      <th>dob_year</th>
      <th>dob_month</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>White</td>
      <td>Mary</td>
      <td>Jane Ursula</td>
      <td>1961</td>
      <td>8</td>
    </tr>
    <tr>
      <th>1</th>
      <td>White</td>
      <td>Andrew</td>
      <td>Gwynne Haydon</td>
      <td>1960</td>
      <td>2</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Cooke</td>
      <td>Bernard</td>
      <td>Patrick</td>
      <td>1939</td>
      <td>3</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Schofield</td>
      <td>Peter</td>
      <td>Malcolm</td>
      <td>1944</td>
      <td>2</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Howells</td>
      <td>Peter</td>
      <td>John</td>
      <td>1951</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It's convenient to use pandas to create a table in the database. We store the raw data in a table called <code>actual_data</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">c1</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">c1</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DROP TABLE IF EXISTS actual_data&quot;</span><span class="p">)</span>
<span class="n">to_dedupe</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;actual_data&#39;</span><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <span class="n">if_exists</span><span class="o">=</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">index_label</span> <span class="o">=</span> <span class="s1">&#39;id&#39;</span><span class="p">)</span>
<span class="n">c1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Creating-inverted-indexes-for-the-fields-that-require-it">Creating inverted indexes for the fields that require it<a class="anchor-link" href="#Creating-inverted-indexes-for-the-fields-that-require-it">&#182;</a></h2><p>i.e. those which have a CanopyPredicate or SearchPredicate associated with them</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># A dictionary of the Index Predicates that will used for blocking. </span>
<span class="c1"># The keys are the fields the predicates will operate on.</span>
<span class="n">deduper</span><span class="o">.</span><span class="n">blocker</span><span class="o">.</span><span class="n">index_fields</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[32]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>defaultdict(&lt;function dedupe.blocking.Blocker.__init__.&lt;locals&gt;.&lt;lambda&gt;&gt;,
            {&#39;dob_month&#39;: defaultdict(list,
                         {&#39;TfidfNGramCanopyPredicate&#39;: [TfidfNGramCanopyPredicate: (0.4, dob_month)]}),
             &#39;family_name&#39;: defaultdict(list,
                         {&#39;TfidfTextCanopyPredicate&#39;: [TfidfTextCanopyPredicate: (0.4, family_name)]}),
             &#39;middle_name&#39;: defaultdict(list,
                         {&#39;TfidfTextCanopyPredicate&#39;: [TfidfTextCanopyPredicate: (0.2, middle_name),
                           TfidfTextCanopyPredicate: (0.8, middle_name)]})})</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># this does not add an index if there are no canopy predicates in the index_fields</span>
<span class="n">c3</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">deduper</span><span class="o">.</span><span class="n">blocker</span><span class="o">.</span><span class="n">index_fields</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;creating inverted index on: &#39;</span> <span class="o">+</span> <span class="n">field</span><span class="p">)</span>
    <span class="n">c3</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT {field} FROM actual_data &quot;</span>
               <span class="s2">&quot;WHERE {field} IS NOT NULL&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">field</span> <span class="o">=</span> <span class="n">field</span><span class="p">))</span>
    <span class="n">field_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">c3</span><span class="p">)</span>
    <span class="c1"># Indexes the data from a field for use in an index predicate/canopy</span>
    <span class="c1"># This goes through row-by-row</span>
    <span class="n">deduper</span><span class="o">.</span><span class="n">blocker</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">field_data</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>

<span class="n">c3</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>creating inverted index on: dob_month
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:dedupe.blocking:Canopy: TfidfNGramCanopyPredicate: (0.4, dob_month)
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>creating inverted index on: middle_name
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.2, middle_name)
INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.8, middle_name)
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>creating inverted index on: family_name
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:dedupe.blocking:Canopy: TfidfTextCanopyPredicate: (0.4, family_name)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Creating-the-blocks/canopies">Creating the blocks/canopies<a class="anchor-link" href="#Creating-the-blocks/canopies">&#182;</a></h2><p>Start by creating the (empty) table in the database that will contain the mapping between the blocks and the row_ids.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">c2</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">c2</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DROP TABLE IF EXISTS blocking_map&quot;</span><span class="p">)</span>
<span class="n">c2</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE blocking_map &quot;</span>
          <span class="s2">&quot;(block_key VARCHAR(200), id INTEGER) &quot;</span><span class="p">)</span>
<span class="n">c2</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">SELECT_STATEMENT</span> <span class="o">=</span> <span class="s2">&quot;SELECT id, family_name, given_name, middle_name, &quot;</span> \
                   <span class="s2">&quot;dob_year, dob_month FROM actual_data&quot;</span>

<span class="n">c4</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;writing blocking map&#39;</span><span class="p">)</span>
<span class="n">c4</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">SELECT_STATEMENT</span><span class="p">)</span>
<span class="c1"># the data should be fed to the blocker as an iterable of the form:</span>
<span class="c1"># data = [(1, {&#39;name&#39; : &#39;bob&#39;}), (2, {&#39;name&#39; : &#39;suzanne&#39;}), ... ]</span>
<span class="n">full_data</span> <span class="o">=</span> <span class="p">((</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                       <span class="s1">&#39;family_name&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                       <span class="s1">&#39;given_name&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                       <span class="s1">&#39;middle_name&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                       <span class="s1">&#39;dob_year&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
                       <span class="s1">&#39;dob_month&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">5</span><span class="p">]})</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">c4</span><span class="p">)</span>
<span class="c1"># Generate the predicates for records. Yields tuples of (predicate, record_id)</span>
<span class="n">b_data</span> <span class="o">=</span> <span class="n">deduper</span><span class="o">.</span><span class="n">blocker</span><span class="p">(</span><span class="n">full_data</span><span class="p">)</span>
<span class="c1"># b_data has the form:</span>
<span class="c1"># [(&#39;foo:1&#39;, 1), ..., (&#39;bar:1&#39;, 100)]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>writing blocking map
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># b_data is a generator so will yield output as looped over</span>
<span class="n">c5</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">b_data</span><span class="p">:</span>
    <span class="n">c5</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO blocking_map (block_key, id) VALUES (&#39;{block_key}&#39;,{id})&quot;</span><span class="o">.</span>\
               <span class="n">format</span><span class="p">(</span><span class="n">block_key</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">id</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
<span class="n">c5</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">c4</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:dedupe.blocking:10000, 0.8866982 seconds
INFO:dedupe.blocking:20000, 1.6555902 seconds
INFO:dedupe.blocking:30000, 2.4064102 seconds
INFO:dedupe.blocking:40000, 3.1403292 seconds
INFO:dedupe.blocking:50000, 3.8846132 seconds
INFO:dedupe.blocking:60000, 4.6088152 seconds
INFO:dedupe.blocking:70000, 5.3391912 seconds
INFO:dedupe.blocking:80000, 6.0645912 seconds
INFO:dedupe.blocking:90000, 6.7555952 seconds
INFO:dedupe.blocking:100000, 7.4369202 seconds
INFO:dedupe.blocking:110000, 8.1320572 seconds
INFO:dedupe.blocking:120000, 8.8197112 seconds
INFO:dedupe.blocking:130000, 9.5520212 seconds
INFO:dedupe.blocking:140000, 10.3426402 seconds
INFO:dedupe.blocking:150000, 11.1764612 seconds
INFO:dedupe.blocking:160000, 12.0623922 seconds
INFO:dedupe.blocking:170000, 12.9916722 seconds
INFO:dedupe.blocking:180000, 13.9297212 seconds
INFO:dedupe.blocking:190000, 14.8699092 seconds
INFO:dedupe.blocking:200000, 15.7996292 seconds
INFO:dedupe.blocking:210000, 16.5510012 seconds
INFO:dedupe.blocking:220000, 17.2484762 seconds
INFO:dedupe.blocking:230000, 17.9182622 seconds
INFO:dedupe.blocking:240000, 18.6009632 seconds
INFO:dedupe.blocking:250000, 19.2736792 seconds
INFO:dedupe.blocking:260000, 19.9467552 seconds
INFO:dedupe.blocking:270000, 20.6309332 seconds
INFO:dedupe.blocking:280000, 21.2957982 seconds
INFO:dedupe.blocking:290000, 21.9544192 seconds
INFO:dedupe.blocking:300000, 22.6275562 seconds
INFO:dedupe.blocking:310000, 23.4300932 seconds
INFO:dedupe.blocking:320000, 24.1403062 seconds
INFO:dedupe.blocking:330000, 24.8197872 seconds
INFO:dedupe.blocking:340000, 25.4823882 seconds
INFO:dedupe.blocking:350000, 26.1421512 seconds
INFO:dedupe.blocking:360000, 26.8031332 seconds
INFO:dedupe.blocking:370000, 27.4551432 seconds
INFO:dedupe.blocking:380000, 28.1198822 seconds
INFO:dedupe.blocking:390000, 28.7666722 seconds
INFO:dedupe.blocking:400000, 29.4340742 seconds
INFO:dedupe.blocking:410000, 30.0859422 seconds
INFO:dedupe.blocking:420000, 30.7262992 seconds
INFO:dedupe.blocking:430000, 31.3874802 seconds
INFO:dedupe.blocking:440000, 32.0366312 seconds
INFO:dedupe.blocking:450000, 32.7143132 seconds
INFO:dedupe.blocking:460000, 33.3956372 seconds
INFO:dedupe.blocking:470000, 34.1253152 seconds
INFO:dedupe.blocking:480000, 34.8132422 seconds
INFO:dedupe.blocking:490000, 35.4847342 seconds
INFO:dedupe.blocking:500000, 36.1423512 seconds
INFO:dedupe.blocking:510000, 36.7974212 seconds
INFO:dedupe.blocking:520000, 37.4679592 seconds
INFO:dedupe.blocking:530000, 38.1166822 seconds
INFO:dedupe.blocking:540000, 38.8171572 seconds
INFO:dedupe.blocking:550000, 39.5315302 seconds
INFO:dedupe.blocking:560000, 40.2375672 seconds
INFO:dedupe.blocking:570000, 40.9275792 seconds
INFO:dedupe.blocking:580000, 41.7327812 seconds
INFO:dedupe.blocking:590000, 42.4457382 seconds
INFO:dedupe.blocking:600000, 43.1246422 seconds
INFO:dedupe.blocking:610000, 43.7684642 seconds
INFO:dedupe.blocking:620000, 44.5120412 seconds
INFO:dedupe.blocking:630000, 45.2681682 seconds
INFO:dedupe.blocking:640000, 45.9224352 seconds
INFO:dedupe.blocking:650000, 46.5498092 seconds
INFO:dedupe.blocking:660000, 47.2548972 seconds
INFO:dedupe.blocking:670000, 48.0567672 seconds
INFO:dedupe.blocking:680000, 48.7506512 seconds
INFO:dedupe.blocking:690000, 49.6441622 seconds
INFO:dedupe.blocking:700000, 50.6131992 seconds
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The blocking_map actually looks like the following:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># How well has the blocking worked? check that there are not loads of blocks with single counts</span>
<span class="n">blocking_map_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM blocking_map&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
<span class="n">blocking_map_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[37]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>block_key</th>
      <th>id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>471:299:3</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>471:300:3</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>814:206:3</td>
      <td>7</td>
    </tr>
    <tr>
      <th>3</th>
      <td>217:301:3</td>
      <td>8</td>
    </tr>
    <tr>
      <th>4</th>
      <td>815:131:3</td>
      <td>9</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Conceptually, you can think of the blocks/canopies as looking something like this (note that you end up with this situation for each Predicate dedupe finds):</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;./diagrams/blocking_map.png&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[2]:</div>


<div class="output_png output_subarea output_execute_result">
<img src="data:image/png;base64,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
" width="400" height="400">
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And here is a list of the ten largest blocks:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">blocking_map_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;block_key&#39;</span><span class="p">)[</span><span class="s1">&#39;block_key&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[38]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>block_key
Valaitis:3:4    668
Smith:4:4       470
Smith:1:4       459
3591:233:3      448
Smith:3:4       419
Jones:1:4       347
Jones:4:4       346
Jones:3:4       306
75:663:3        297
75:19:3         291
Name: block_key, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note - when rows do not fall into any block they are excluded (because they can only be singletons), so the length of the <code>blocking_map</code> might be shorter than the overall data.</p>
<p>It may, of course, also be longer as the same row can appear in multiple blocks/canopies.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">blocking_map_df</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">to_dedupe</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>570464
706151
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If we merge the blocking map back onto the original data, we can see what has been lumped together:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">merged</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">blocking_map_df</span><span class="p">,</span> <span class="n">to_dedupe</span><span class="p">,</span> <span class="n">left_on</span> <span class="o">=</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">right_index</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;block_key&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[41]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>block_key</th>
      <th>id</th>
      <th>family_name</th>
      <th>given_name</th>
      <th>middle_name</th>
      <th>dob_year</th>
      <th>dob_month</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>526870</th>
      <td>02893324178:3:4</td>
      <td>699883</td>
      <td>02893324178</td>
      <td>Derek</td>
      <td>Higgins</td>
      <td>1949</td>
      <td>11</td>
    </tr>
    <tr>
      <th>255126</th>
      <td>08022036:4:4</td>
      <td>320653</td>
      <td>08022036</td>
      <td>Nicola</td>
      <td>None</td>
      <td>1968</td>
      <td>10</td>
    </tr>
    <tr>
      <th>137923</th>
      <td>0Brien:1:4</td>
      <td>171840</td>
      <td>0'Brien</td>
      <td>Ivana</td>
      <td>Maria</td>
      <td>1962</td>
      <td>12</td>
    </tr>
    <tr>
      <th>443993</th>
      <td>100003:36449:3</td>
      <td>572372</td>
      <td>Semerean</td>
      <td>Ovidiu</td>
      <td>Severian</td>
      <td>1976</td>
      <td>11</td>
    </tr>
    <tr>
      <th>274820</th>
      <td>10000:264:3</td>
      <td>346236</td>
      <td>Meachin</td>
      <td>Robert</td>
      <td>James</td>
      <td>1982</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[42]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">merged</span><span class="p">[</span><span class="n">merged</span><span class="o">.</span><span class="n">family_name</span> <span class="o">==</span> <span class="s1">&#39;Loch&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[42]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>block_key</th>
      <th>id</th>
      <th>family_name</th>
      <th>given_name</th>
      <th>middle_name</th>
      <th>dob_year</th>
      <th>dob_month</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>187114</th>
      <td>42572:35:3</td>
      <td>233786</td>
      <td>Loch</td>
      <td>Pamela</td>
      <td>Ann</td>
      <td>1967</td>
      <td>1</td>
    </tr>
    <tr>
      <th>373228</th>
      <td>42572:35:3</td>
      <td>477017</td>
      <td>Loch</td>
      <td>Pamela</td>
      <td>Ann</td>
      <td>1967</td>
      <td>1</td>
    </tr>
    <tr>
      <th>512293</th>
      <td>42572:35:3</td>
      <td>677794</td>
      <td>Loch</td>
      <td>Pam</td>
      <td>Ann</td>
      <td>1967</td>
      <td>1</td>
    </tr>
    <tr>
      <th>536487</th>
      <td>42572:18:3</td>
      <td>713316</td>
      <td>Loch</td>
      <td>Elizabeth</td>
      <td>Mary</td>
      <td>1963</td>
      <td>2</td>
    </tr>
    <tr>
      <th>570463</th>
      <td>NaN</td>
      <td>237119</td>
      <td>Loch</td>
      <td>Richard</td>
      <td>None</td>
      <td>1968</td>
      <td>8</td>
    </tr>
    <tr>
      <th>570463</th>
      <td>NaN</td>
      <td>759367</td>
      <td>Loch</td>
      <td>Pam</td>
      <td>None</td>
      <td>1967</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, we create an index on the <code>block_key</code> for faster queries, and free up memory used by the inverted indexes:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[43]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;indexing block_key&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE INDEX blocking_map_key_idx ON blocking_map (block_key)&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:root:indexing block_key
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">Out[43]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[44]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">deduper</span><span class="o">.</span><span class="n">blocker</span><span class="o">.</span><span class="n">resetIndices</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="SQL-manipulations-to-prepare-blocks-for-matching">SQL manipulations to prepare blocks for matching<a class="anchor-link" href="#SQL-manipulations-to-prepare-blocks-for-matching">&#182;</a></h2><p>The next steps require some data manipulations to prepare the blocks into the format required by the <code>matchBlocks</code> method. See the <code>matchBlocks</code> section in the <a href="https://dedupe.readthedocs.io/en/latest/API-documentation.html#dedupe-objects">documentation</a> for exactly what that format is.</p>
<p>A MySQL version of these steps can be found <a href="http://datamade.github.io/dedupe-examples/docs/mysql_example.html#section-26">here</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These are the tables that we will be created shortly:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[45]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DROP TABLE IF EXISTS plural_key&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DROP TABLE IF EXISTS plural_block&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DROP TABLE IF EXISTS covered_blocks&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DROP TABLE IF EXISTS smaller_coverage&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[45]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Plural-Key-table">Plural Key table<a class="anchor-link" href="#Plural-Key-table">&#182;</a></h3><p>Here, the block_keys (which are fairly long varchar types) are reassigned an integer id, imaginatively called block_id. Further, if one block_key forms identical blocks, we only keep one of them. Further further, we only keep blocks that have more than one record in them (as that record is obviously not going to be matched to another record) - this is why the word 'plural' is used!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[46]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;calculating plural_key&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot; DROP TABLE IF EXISTS plural_key&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE plural_key &quot;</span>
          <span class="s2">&quot;(block_key VARCHAR(200), &quot;</span>
          <span class="s2">&quot; block_id INTEGER PRIMARY KEY AUTOINCREMENT)  &quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:root:calculating plural_key
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">Out[46]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[47]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot; INSERT INTO plural_key (block_key) &quot;</span>
          <span class="s2">&quot; SELECT MIN(block_key) FROM &quot;</span>
          <span class="s2">&quot;    (SELECT block_key, GROUP_CONCAT(id) AS block FROM &quot;</span>
          <span class="s2">&quot;       (SELECT block_key, id FROM blocking_map ORDER BY block_key, id) AS a &quot;</span>
          <span class="s2">&quot;    GROUP BY block_key &quot;</span>
          <span class="s2">&quot;    HAVING COUNT(*) &gt; 1) AS b &quot;</span>
          <span class="s2">&quot; GROUP BY block  &quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[47]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>... and this is what <code>plural_key</code> actually looks like:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[48]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">plural_key_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM plural_key&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
<span class="n">plural_key_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[48]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>block_key</th>
      <th>block_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>471:299:3</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>471:300:3</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Osborne:4:4</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Folan:1:4</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Folan:3:4</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The length of <code>plural_key</code> is the number of blocks within which records will be matched later:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">plural_key_df</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>66318
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As a sanity check, there should be no duplicated rows in <code>plural_key</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[50]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">plural_key_df</span><span class="p">[</span><span class="n">plural_key_df</span><span class="o">.</span><span class="n">duplicated</span><span class="p">(</span><span class="n">keep</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)])</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;no duplicated rows in plural_key&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;somehow duplicated rows have crept into plural_key - fix before continuing!!&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>no duplicated rows in plural_key
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And finally we index the table appropriately:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[51]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;creating block_key index&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE UNIQUE INDEX block_key_idx ON plural_key (block_key)&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:root:creating block_key index
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">Out[51]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Plural-Block-table">Plural Block table<a class="anchor-link" href="#Plural-Block-table">&#182;</a></h3><p>This simply links <code>block_id</code> calculated in <code>plural_key</code> above back to the records that each block contains (as represented by <code>id</code>).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[52]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;calculating plural_block&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot; DROP TABLE IF EXISTS plural_block &quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot; CREATE TABLE plural_block AS &quot;</span>
          <span class="s2">&quot; SELECT block_id, id &quot;</span>
          <span class="s2">&quot; FROM blocking_map AS a &quot;</span>
          <span class="s2">&quot; INNER JOIN plural_key AS b &quot;</span>
          <span class="s2">&quot; ON a.block_key = b.block_key &quot;</span>
          <span class="s2">&quot; ORDER BY block_id, id&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:root:calculating plural_block
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">Out[52]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[53]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">plural_block_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM plural_block&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
<span class="n">plural_block_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[53]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>block_id</th>
      <th>id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>605691</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>605692</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3</td>
      <td>1000</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[54]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">plural_block_df</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>294466
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[55]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">plural_block_df</span><span class="p">[</span><span class="n">plural_block_df</span><span class="o">.</span><span class="n">duplicated</span><span class="p">(</span><span class="n">keep</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)])</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;no duplicated rows in plural_block&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;somehow duplicated rows have crept into plural_block - fix before continuing!!&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>no duplicated rows in plural_block
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[56]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;adding id index and sorting index&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE INDEX plural_block_id_idx ON plural_block (id)&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE UNIQUE INDEX plural_block_block_id_id_uniq &quot;</span>
          <span class="s2">&quot; ON plural_block (block_id, id)&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:root:adding id index and sorting index
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">Out[56]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Covered-Blocks-table">Covered Blocks table<a class="anchor-link" href="#Covered-Blocks-table">&#182;</a></h3><p>This table maps records to the blocks they appear in (if more than one, all blocks are concatenated with a comma separator). Remember that, at this stage, blocks with just one record in ("singleton" blocks) have been excluded.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[57]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;creating covered_blocks&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot; CREATE TABLE covered_blocks AS &quot;</span>
          <span class="s2">&quot; SELECT id, GROUP_CONCAT(block_id) AS sorted_ids&quot;</span>
          <span class="s2">&quot; FROM (SELECT id, block_id FROM plural_block ORDER BY id, block_id) AS a &quot;</span>
          <span class="s2">&quot; GROUP BY id&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:root:creating covered_blocks
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">Out[57]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[58]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">covered_blocks_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM covered_blocks&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
<span class="n">covered_blocks_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[58]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>sorted_ids</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7</td>
      <td>57783</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9</td>
      <td>64129</td>
    </tr>
    <tr>
      <th>4</th>
      <td>13</td>
      <td>6112</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Number of rows in <code>covered_blocks</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[59]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">covered_blocks_df</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>258376
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Examples of rows which appear in more than one block:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[60]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">covered_blocks_df</span><span class="p">[</span><span class="n">covered_blocks_df</span><span class="o">.</span><span class="n">sorted_ids</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[60]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>sorted_ids</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9</th>
      <td>27</td>
      <td>27254,27255</td>
    </tr>
    <tr>
      <th>19</th>
      <td>75</td>
      <td>60564,60565</td>
    </tr>
    <tr>
      <th>20</th>
      <td>80</td>
      <td>61869,61870</td>
    </tr>
    <tr>
      <th>24</th>
      <td>92</td>
      <td>64591,64592</td>
    </tr>
    <tr>
      <th>41</th>
      <td>197</td>
      <td>17381,17382</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[61]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE UNIQUE INDEX covered_blocks_id_idx &quot;</span>
          <span class="s2">&quot;ON covered_blocks (id)&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[61]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[62]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Smaller-Coverage-table">Smaller Coverage table<a class="anchor-link" href="#Smaller-Coverage-table">&#182;</a></h3><p>This table is a PITA to think about. Essentially, it says: for each record, which <code>block_id</code> is it in; is it in any other <code>block_ids</code>; and if so, which other <code>block_ids</code> are smaller than this one? The purpose is that we don't want to make multiple comparisons of the same pairs of records. If both records fall into the two blocks, for example, we only want to compare them once.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[63]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;creating smaller_coverage&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot; DROP TABLE IF EXISTS smaller_coverage &quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot; CREATE TABLE smaller_coverage &quot;</span>
          <span class="s2">&quot; AS SELECT a.id, block_id, sorted_ids, &quot;</span>
          <span class="s2">&quot;           RTRIM(SUBSTR(sorted_ids, 1, INSTR(sorted_ids, block_id) - 1), &#39;,&#39;) as smaller_ids &quot;</span>
          <span class="s2">&quot; FROM plural_block AS a &quot;</span>
          <span class="s2">&quot; INNER JOIN covered_blocks AS b &quot;</span>
          <span class="s2">&quot; ON a.id = b.id&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:root:creating smaller_coverage
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">Out[63]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[64]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">smaller_coverage_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM smaller_coverage&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
<span class="n">smaller_coverage_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[64]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>block_id</th>
      <th>sorted_ids</th>
      <th>smaller_ids</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td></td>
    </tr>
    <tr>
      <th>1</th>
      <td>605691</td>
      <td>1</td>
      <td>1</td>
      <td></td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>2</td>
      <td>2</td>
      <td></td>
    </tr>
    <tr>
      <th>3</th>
      <td>605692</td>
      <td>2</td>
      <td>2</td>
      <td></td>
    </tr>
    <tr>
      <th>4</th>
      <td>1000</td>
      <td>3</td>
      <td>3</td>
      <td></td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[65]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">smaller_coverage_df</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>294466
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Examples of where <code>smaller_ids</code> is not empty:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[66]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">smaller_coverage_df</span><span class="p">[</span><span class="n">smaller_coverage_df</span><span class="o">.</span><span class="n">smaller_ids</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[66]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>block_id</th>
      <th>sorted_ids</th>
      <th>smaller_ids</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>69828</th>
      <td>178568</td>
      <td>14600</td>
      <td>14598,14599,14600</td>
      <td>14598,14599</td>
    </tr>
    <tr>
      <th>69829</th>
      <td>223486</td>
      <td>14600</td>
      <td>14598,14599,14600</td>
      <td>14598,14599</td>
    </tr>
    <tr>
      <th>69830</th>
      <td>245362</td>
      <td>14600</td>
      <td>14598,14599,14600</td>
      <td>14598,14599</td>
    </tr>
    <tr>
      <th>69936</th>
      <td>178720</td>
      <td>14628</td>
      <td>7265,14627,14628</td>
      <td>7265,14627</td>
    </tr>
    <tr>
      <th>69937</th>
      <td>241185</td>
      <td>14628</td>
      <td>7265,14627,14628</td>
      <td>7265,14627</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Clustering-within-the-blocks/canopies">Clustering within the blocks/canopies<a class="anchor-link" href="#Clustering-within-the-blocks/canopies">&#182;</a></h2><p>First create the final table that is fed to <code>matchBlocks</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[67]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;creating final table&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE final AS &quot;</span>
          <span class="s2">&quot;SELECT a.id, family_name,given_name, middle_name, dob_year, dob_month, &quot;</span>
          <span class="s2">&quot;block_id, smaller_ids &quot;</span>
          <span class="s2">&quot;FROM smaller_coverage AS a &quot;</span>
          <span class="s2">&quot;INNER JOIN actual_data AS b &quot;</span>
          <span class="s2">&quot;ON a.id = b.id &quot;</span>
          <span class="s2">&quot;ORDER BY (block_id)&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:root:creating final table
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">Out[67]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[68]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[69]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">to_match</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM final&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
<span class="n">to_match</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[69]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>family_name</th>
      <th>given_name</th>
      <th>middle_name</th>
      <th>dob_year</th>
      <th>dob_month</th>
      <th>block_id</th>
      <th>smaller_ids</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>White</td>
      <td>Mary</td>
      <td>Jane Ursula</td>
      <td>1961</td>
      <td>8</td>
      <td>1</td>
      <td></td>
    </tr>
    <tr>
      <th>1</th>
      <td>605691</td>
      <td>White</td>
      <td>Mary</td>
      <td>Jane Ursula</td>
      <td>1961</td>
      <td>8</td>
      <td>1</td>
      <td></td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>White</td>
      <td>Andrew</td>
      <td>Gwynne Haydon</td>
      <td>1960</td>
      <td>2</td>
      <td>2</td>
      <td></td>
    </tr>
    <tr>
      <th>3</th>
      <td>605692</td>
      <td>White</td>
      <td>Andrew</td>
      <td>Gwynne Haydon</td>
      <td>1960</td>
      <td>2</td>
      <td>2</td>
      <td></td>
    </tr>
    <tr>
      <th>4</th>
      <td>1000</td>
      <td>Osborne</td>
      <td>Jill</td>
      <td>Penelope</td>
      <td>1951</td>
      <td>10</td>
      <td>3</td>
      <td></td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Write a generator function that feeds the blocks to <code>matchBlocks</code> in the correct format:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[70]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Clustering function</span>
<span class="k">def</span> <span class="nf">candidates_gen</span><span class="p">(</span><span class="n">result_set</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">lset</span> <span class="o">=</span> <span class="nb">set</span>

    <span class="n">block_id</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result_set</span> <span class="p">:</span>
        <span class="c1"># need to change from list to dict for sqlite query</span>
        <span class="n">row</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
               <span class="s1">&#39;family_name&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
               <span class="s1">&#39;given_name&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
               <span class="s1">&#39;middle_name&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
               <span class="s1">&#39;dob_year&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
               <span class="s1">&#39;dob_month&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
               <span class="s1">&#39;block_id&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
               <span class="s1">&#39;smaller_ids&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">7</span><span class="p">]}</span>

        <span class="c1"># if there&#39;s a new block id then yield the old block</span>
        <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;block_id&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">block_id</span> <span class="p">:</span>
            <span class="c1">#print(&quot;done with block id: {}&quot;.format(row[&#39;block_id&#39;]))</span>
            <span class="k">if</span> <span class="n">records</span> <span class="p">:</span>
                <span class="c1">#print(len(records))</span>
                <span class="k">yield</span> <span class="n">records</span>

            
            <span class="n">block_id</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;block_id&#39;</span><span class="p">]</span>
            <span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">10000</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s2">&quot;blocks&quot;</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">,</span> <span class="s2">&quot;seconds&quot;</span><span class="p">)</span>

        <span class="n">smaller_ids</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;smaller_ids&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">smaller_ids</span> <span class="p">:</span>
            <span class="n">smaller_ids</span> <span class="o">=</span> <span class="n">lset</span><span class="p">(</span><span class="n">smaller_ids</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="n">smaller_ids</span> <span class="o">=</span> <span class="n">lset</span><span class="p">([])</span>

        <span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">,</span> <span class="n">smaller_ids</span><span class="p">))</span>

    <span class="c1"># once gone through the loop need to yield the last block</span>
    <span class="k">if</span> <span class="n">records</span> <span class="p">:</span>
        <span class="k">yield</span> <span class="n">records</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Deal with the bug where <code>matchBlocks</code> hangs if it is using more than one core:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[71]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># this has to be set to 1 or matchBlocks fails</span>
<span class="n">deduper</span><span class="o">.</span><span class="n">num_cores</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[72]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM final&quot;</span><span class="p">)</span>
<span class="c1"># cands is the iterable</span>
<span class="n">cands</span> <span class="o">=</span> <span class="n">candidates_gen</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>clustering...
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally - at the stage where we can perform the comparison between all the records in a block:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[73]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;clustering...&#39;</span><span class="p">)</span>
<span class="n">clustered_dupes</span> <span class="o">=</span> <span class="n">deduper</span><span class="o">.</span><span class="n">matchBlocks</span><span class="p">(</span><span class="n">cands</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>10000 blocks
11.290481805801392 seconds
20000 blocks
15.696646928787231 seconds
30000 blocks
20.057891845703125 seconds
40000 blocks
23.997675895690918 seconds
50000 blocks
28.32711100578308 seconds
60000 blocks
32.93247079849243 seconds
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Saving-the-results">Saving the results<a class="anchor-link" href="#Saving-the-results">&#182;</a></h2><p>We store the results of <code>matchBlocks</code> in a table called <code>entity_map</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[74]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DROP TABLE IF EXISTS entity_map&quot;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;creating entity_map database&#39;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE entity_map &quot;</span>
          <span class="s2">&quot;(id INTEGER, canon_id INTEGER, &quot;</span>
          <span class="s2">&quot; cluster_score FLOAT, PRIMARY KEY(id))&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>creating entity_map database
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">Out[74]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;sqlite3.Cursor at 0x1358b8500&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[75]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">for</span> <span class="n">cluster</span><span class="p">,</span> <span class="n">scores</span> <span class="ow">in</span> <span class="n">clustered_dupes</span> <span class="p">:</span>
    <span class="n">cluster_id</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span> <span class="n">scores</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;INSERT INTO entity_map VALUES ({}, {}, {})&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">cluster_id</span><span class="p">,</span> <span class="n">score</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[76]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE INDEX head_index ON entity_map (canon_id)&quot;</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[77]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">entity_map_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM entity_map&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[78]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">entity_map_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[78]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>canon_id</th>
      <th>cluster_score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>9</td>
      <td>9</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>13</td>
      <td>13</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24</td>
      <td>24</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Print the number of duplicates found:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[79]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;# duplicate sets&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clustered_dupes</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre># duplicate sets
32805
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Combining-the-results-with-the-original-data">Combining the results with the original data<a class="anchor-link" href="#Combining-the-results-with-the-original-data">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[80]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">output</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">to_dedupe</span><span class="p">,</span> <span class="n">entity_map_df</span><span class="p">,</span> <span class="n">left_index</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">right_on</span> <span class="o">=</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[81]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">output</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s1">&#39;canon_id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[81]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>family_name</th>
      <th>given_name</th>
      <th>middle_name</th>
      <th>dob_year</th>
      <th>dob_month</th>
      <th>id</th>
      <th>canon_id</th>
      <th>cluster_score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>White</td>
      <td>Mary</td>
      <td>Jane Ursula</td>
      <td>1961</td>
      <td>8</td>
      <td>0</td>
      <td>0.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>65881</th>
      <td>White</td>
      <td>Mary</td>
      <td>Jane Ursula</td>
      <td>1961</td>
      <td>8</td>
      <td>605691</td>
      <td>0.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>White</td>
      <td>Andrew</td>
      <td>Gwynne Haydon</td>
      <td>1960</td>
      <td>2</td>
      <td>1</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>65882</th>
      <td>White</td>
      <td>Andrew</td>
      <td>Gwynne Haydon</td>
      <td>1960</td>
      <td>2</td>
      <td>605692</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Howells</td>
      <td>Peter</td>
      <td>John</td>
      <td>1951</td>
      <td>3</td>
      <td>9</td>
      <td>9.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>4703</th>
      <td>Howells</td>
      <td>Peter</td>
      <td>John</td>
      <td>1951</td>
      <td>3</td>
      <td>33099</td>
      <td>9.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>120</th>
      <td>Sanderson</td>
      <td>John</td>
      <td>Francis</td>
      <td>1941</td>
      <td>9</td>
      <td>895</td>
      <td>13.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>21394</th>
      <td>Sanderson</td>
      <td>John</td>
      <td>Francis</td>
      <td>1941</td>
      <td>9</td>
      <td>173796</td>
      <td>13.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Sanderson</td>
      <td>John</td>
      <td>Francis</td>
      <td>1941</td>
      <td>9</td>
      <td>13</td>
      <td>13.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Richardson</td>
      <td>Eric</td>
      <td>Keith</td>
      <td>1939</td>
      <td>1</td>
      <td>24</td>
      <td>24.0</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>An example of success - for this person, the <code>dob_year</code> is different, but each row fairly surely refers to the same thing, so they have the same <code>canon_id</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[86]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">output</span><span class="p">[</span><span class="n">output</span><span class="o">.</span><span class="n">family_name</span> <span class="o">==</span> <span class="s1">&#39;Meath Baker&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[86]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>family_name</th>
      <th>given_name</th>
      <th>middle_name</th>
      <th>dob_year</th>
      <th>dob_month</th>
      <th>id</th>
      <th>canon_id</th>
      <th>cluster_score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>46</th>
      <td>Meath Baker</td>
      <td>Prescilla</td>
      <td>Ann</td>
      <td>1937</td>
      <td>5</td>
      <td>361</td>
      <td>361.0</td>
      <td>0.764748</td>
    </tr>
    <tr>
      <th>81</th>
      <td>Meath Baker</td>
      <td>Prescilla</td>
      <td>Ann</td>
      <td>1938</td>
      <td>5</td>
      <td>610</td>
      <td>361.0</td>
      <td>0.764748</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Rows with the same <code>canon_id</code> are the rows which dedupe believes are the referring to the same thing. The <code>cluster_score</code> is a measure of how sure dedupe is about the comparison. If there is no <code>canon_id</code> at all, dedupe doesn't believe that that row has a pair.</p>
<p>By playing with the precision/recall in the <code>train</code> (and other?) methods, one can move the metaphorical slider between capturing <em>all</em> of the duplicated records (at the expense of including some pairs which aren't referring to the same person - high recall), and being certain that the records you say are pairs really are pairs (at the expense of missing some of the pairs that should be lumped together - high precision).</p>
<p>Much more information about entity resolution can be found in this <a href="http://www.cs.utexas.edu/~ml/papers/marlin-dissertation-06.pdf">PhD thesis</a>. Indeed the dedupe package itself is based on this work!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[87]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># save output to a csv</span>
<span class="n">output</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;entity_resolved_controlling_entities.csv&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/handy_functions.html" rel="bookmark"
                           title="Permalink to Handy Functions">Handy Functions</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-10-24T09:30:00+01:00">
                Published: Mon 24 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/ned.html">Ned</a>
        </address>
<p>In <a href="/category/data-science.html">Data Science</a>.</p>
<p>tags: <a href="/tag/data-science.html">data science</a> <a href="/tag/python.html">python</a> <a href="/tag/handy-function.html">handy function</a> </p>
</footer><!-- /.post-info -->                
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
                <a class="readmore" href="/handy_functions.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/fitting_all_of_scipys_distributions.html" rel="bookmark"
                           title="Permalink to Fitting All of Scipy's Distributions">Fitting All of Scipy's Distributions</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-10-15T16:25:00+01:00">
                Published: Sat 15 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/ned.html">Ned</a>
        </address>
<p>In <a href="/category/data-science.html">Data Science</a>.</p>
<p>tags: <a href="/tag/data-science.html">data science</a> <a href="/tag/tutorial.html">tutorial</a> <a href="/tag/interview.html">interview</a> <a href="/tag/handy-function.html">handy function</a> </p>
</footer><!-- /.post-info -->                
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
                <a class="readmore" href="/fitting_all_of_scipys_distributions.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/model_flexibility_and_the_risk_of_overfitting.html" rel="bookmark"
                           title="Permalink to Model Flexibility and the Risk of Overfitting">Model Flexibility and the Risk of Overfitting</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-10-10T13:50:00+01:00">
                Published: Mon 10 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/ned.html">Ned</a>
        </address>
<p>In <a href="/category/data-science.html">Data Science</a>.</p>
<p>tags: <a href="/tag/data-science.html">data science</a> <a href="/tag/tutorial.html">tutorial</a> </p>
</footer><!-- /.post-info -->                
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Introduction">Introduction<a class="anchor-link" href="#Introduction">&#182;</a></h2><p>When using a regression model, you've got to be <em>super</em> careful that you aren't overfitting your data. But what does that even mean? What causes an "overfitted" model?</p>
<p>Well, the answer to that question is excessive model flexibility. But again, "excessive flexibility" is not the most understandable of responses. Hopefully this post will shed a bit of light on the matter!</p>
                <a class="readmore" href="/model_flexibility_and_the_risk_of_overfitting.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>